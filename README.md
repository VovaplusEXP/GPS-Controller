# GPS-Controller

Android-приложение для продолжения определения местоположения при потере GPS-сигнала с использованием инерциальных датчиков и привязки к дорожной карте.

## Описание

GPS-Controller позволяет устройству продолжать определять своё местоположение даже при глушении GPS-сигнала, используя:

- **Инерциальную навигацию** - акселерометр, гироскоп и магнитометр
- **Детекцию GPS-спуффинга** - определение поддельных GPS-сигналов
- **Map Matching** - привязка к дорожной карте OSM
- **Mock Location Provider** - предоставление местоположения другим приложениям
- **P2P синхронизация** - обмен данными между несколькими устройствами через Bluetooth

## Функциональность

### Инерциальная навигация
- Использование акселерометра, гироскопа и магнитометра для расчёта перемещения
- Интегрирование ускорения для получения скорости и позиции
- Коррекция ориентации устройства в мировую систему координат
- ZUPT (Zero Velocity Update) при определении неподвижности

### Детекция GPS-спуффинга
- Проверка на телепортацию (нереалистичная скорость)
- Сравнение скорости GPS со скоростью от инерциальных датчиков
- Проверка направления движения
- Детекция mock location provider
- Анализ согласованности с движением устройства

### Map Matching
- Загрузка OSM карты региона
- SQLite база данных с сегментами дорог
- Периодическая коррекция дрейфа инерциальной навигации
- Коррекция не более 30 метров за раз

### Mock Location Provider
- Предоставление фиктивного местоположения другим приложениям
- Плавный переход между GPS и инерциальной навигацией
- Требует установки как источника mock location в настройках разработчика

### P2P синхронизация (опционально)
- Одноранговая архитектура без главного устройства
- Bluetooth-соединение между устройствами
- Обмен данными о позиции и уверенности
- Взвешенное усреднение оценок от всех устройств
- Автоматическое отключение при потере связи

## UI/UX

### Material Design 3
- Следование гайдлайнам Material You
- Светлая и тёмная темы
- Автоопределение темы от системы
- Динамические цвета на Android 12+

### Экраны
1. **Экран первого запуска** - приветствие, разрешения, загрузка карты, калибровка
2. **Главный экран** - карта с текущей позицией и статусом навигации
3. **Peer-устройства** - управление подключениями к другим устройствам
4. **Настройки** - управление картой, калибровка, настройки детекции
5. **Диагностика** - данные датчиков, графики, лог событий

## Технические требования

- **Минимальная версия Android:** 8.0 (API 26)
- **Целевая версия:** Android 14 (API 34)
- **Язык:** Java
- **Необходимые датчики:**
  - Акселерометр
  - Гироскоп
  - Магнитометр (опционально)

## Разрешения

- `ACCESS_FINE_LOCATION` - для GPS
- `ACCESS_BACKGROUND_LOCATION` - для фоновой работы
- `ACCESS_MOCK_LOCATION` - для предоставления mock location
- `BLUETOOTH` / `BLUETOOTH_CONNECT` / `BLUETOOTH_SCAN` - для P2P
- `INTERNET` - для загрузки карт

## Установка

1. Клонируйте репозиторий
2. Откройте проект в Android Studio
3. Соберите и установите приложение
4. Включите "Developer options" на устройстве
5. Выберите GPS-Controller как "Select mock location app"

## Использование

1. При первом запуске предоставьте необходимые разрешения
2. Опционально загрузите карту OSM для вашего региона
3. Выполните калибровку датчиков
4. Приложение автоматически определит потерю GPS и переключится на инерциальную навигацию
5. При обнаружении спуффинга получите предупреждение

## Лицензия

GNU General Public License v3.0

## Автор

VovaplusEXP

## Благодарности

- OpenStreetMap за картографические данные
- OSMDroid за библиотеку карт
- Material Design за компоненты UI
